"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[250],{6250:(I,m,r)=>{r.r(m),r.d(m,{TodosModule:()=>J});var p=r(6895),t=r(1571),f=r(529);let l=(()=>{class e{constructor(o){this.http=o}getTodos(){return this.http.get("http://localhost:3000/todos")}getTodoById(o){return this.http.get("http://localhost:3000/todos/"+o)}deleteTodoById(o){return this.http.delete("http://localhost:3000/todos/"+o)}toggleTodoById(o,n){return this.http.patch("http://localhost:3000/todos/"+o+"?completed="+n,{})}addNewTodo(o){return this.http.post("http://localhost:3000/todos",o)}updateTodo(o){return this.http.put("http://localhost:3000/todos/"+o._id,o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var a=r(606);let T=(()=>{class e{constructor(o,n){this.host=o,this.renderer=n,this.setBackground="blue"}ngOnInit(){}ngOnChanges(o){}ngDoCheck(){this.renderer.setStyle(this.host.nativeElement,"background-color",this.setBackground)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(t.SBq),t.Y36(t.Qsj))},e.\u0275dir=t.lG2({type:e,selectors:[["","setBackground",""]],inputs:{setBackground:"setBackground"},features:[t.TTD]}),e})();function g(e,d){if(1&e){const o=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.actions.updateCompleted(i.todo._id,!0))}),t._uU(1,"Mark As Completed"),t.qZA()}}function _(e,d){if(1&e){const o=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.actions.updateCompleted(i.todo._id,!1))}),t._uU(1,"Mark InCompleted"),t.qZA()}}let C=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-todo"]],inputs:{todo:["data","todo"],actions:"actions"},decls:9,vars:9,consts:[[3,"setBackground"],[3,"click"],[3,"click",4,"ngIf"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"date"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.actions.deleteTodo(n.todo._id)}),t._uU(4,"Delete"),t.qZA(),t.TgZ(5,"button",1),t.NdJ("click",function(){return n.actions.updateTodo(n.todo)}),t._uU(6,"Update"),t.qZA(),t.YNc(7,g,2,0,"button",2),t.YNc(8,_,2,0,"button",2)),2&o&&(t.Q6J("setBackground",n.todo.completed?"grey":""),t.xp6(1),t.lnq("",n.todo.title," - ",n.todo.description," - ",t.xi3(2,6,n.todo.timestamp,"short"),""),t.xp6(6),t.Q6J("ngIf",!n.todo.completed),t.xp6(1),t.Q6J("ngIf",n.todo.completed))},dependencies:[p.O5,T,p.uU],encapsulation:2}),e})();const b=function(e){return{cross:e}},v=function(e,d,o){return{deleteTodo:e,updateCompleted:d,updateTodo:o}};function k(e,d){if(1&e&&(t.TgZ(0,"p",2),t._UZ(1,"app-todo",3),t.qZA()),2&e){const o=d.$implicit,n=t.oxw();t.Q6J("ngClass",t.VKq(3,b,o.completed)),t.xp6(1),t.Q6J("data",o)("actions",t.kEZ(5,v,n.deleteTodo.bind(n),n.updateCompleted.bind(n),n.updateTodo.bind(n)))}}let y=(()=>{class e{constructor(o,n){this.todoService=o,this.router=n,this.list_of_todos=[],this.todoService.getTodos().subscribe(i=>{this.list_of_todos=i})}ngOnInit(){}deleteTodo(o){this.todoService.deleteTodoById(o).subscribe(n=>{this.list_of_todos=this.list_of_todos.filter(i=>i._id!==o)})}updateCompleted(o,n){this.todoService.toggleTodoById(o,n).subscribe(i=>{this.list_of_todos=this.list_of_todos.map(c=>(c._id===o&&(c.completed=n),c))})}addTodo(){this.router.navigate(["/","todos","add"])}updateTodo(o){this.router.navigate(["/","todos","edit",o._id],{state:o})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-todos"]],decls:3,vars:1,consts:[[3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"data","actions"]],template:function(o,n){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.addTodo()}),t._uU(1,"Add New Todo"),t.qZA(),t.YNc(2,k,2,9,"p",1)),2&o&&(t.xp6(2),t.Q6J("ngForOf",n.list_of_todos))},dependencies:[p.mk,p.sg,C],styles:[".cross[_ngcontent-%COMP%]{text-decoration:line-through}"]}),e})();var s=r(433),h=r(3614);let F=(()=>{class e{constructor(o,n,i,c){this.fb=o,this.service=n,this.userService=i,this.router=c,this.addForm=this.fb.group({title:["",s.kI.required],description:["",s.kI.required]})}ngOnInit(){}addTodo(){this.service.addNewTodo({...this.addForm.value,completed:!1,user:{user_id:this.userService.getUserState()?.user_id,fullname:this.userService.getUserState()?.fullname}}).subscribe(o=>{this.router.navigate(["/","todos"])})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(l),t.Y36(h.K),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add"]],decls:7,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","text","placeholder","title","formControlName","title"],["type","text","placeholder","description","formControlName","description"],["type","submit",3,"disabled"]],template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1," add new todo! "),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return n.addTodo()}),t._UZ(3,"input",1)(4,"input",2),t.TgZ(5,"button",3),t._uU(6,"Add"),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("formGroup",n.addForm),t.xp6(3),t.Q6J("disabled",!n.addForm.valid))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),e})();var Z=r(5577);let S=(()=>{class e{constructor(o,n,i,c,A){this.fb=o,this.service=n,this.userService=i,this.ar=c,this.router=A,this.ar.paramMap.pipe((0,Z.z)(u=>this.service.getTodoById(u.get("todo_id")))).subscribe(u=>{console.log(u),this.todo=u,this.editForm.get("title")?.patchValue(this.todo.title),this.editForm.get("description")?.patchValue(this.todo.description)}),this.editForm=this.fb.group({title:["",s.kI.required],description:["",s.kI.required]})}ngOnInit(){}editTodo(){this.service.updateTodo({...this.todo,...this.editForm.value}).subscribe(o=>{this.router.navigate(["/","todos"])})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(l),t.Y36(h.K),t.Y36(a.gz),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit"]],decls:7,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","text","placeholder","title","formControlName","title"],["type","text","placeholder","description","formControlName","description"],["type","submit",3,"disabled"]],template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1," edit todo! "),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return n.editTodo()}),t._UZ(3,"input",1)(4,"input",2),t.TgZ(5,"button",3),t._uU(6,"Save"),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("formGroup",n.editForm),t.xp6(3),t.Q6J("disabled",!n.editForm.valid))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),e})(),J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,a.Bz.forChild([{path:"",component:y},{path:"add",component:F},{path:"edit/:todo_id",component:S}]),s.UX]}),e})()}}]);